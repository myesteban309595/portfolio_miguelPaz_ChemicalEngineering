import { AppBar, Toolbar, Typography, Button, Box } from "@mui/material";
import { motion } from "framer-motion";
import TypingCode from "./TypingCode";
import { useNavigate } from "react-router-dom";
import { useEffect } from "react";

function Navbar() {
  const navigate = useNavigate();

  useEffect(() => {
    const timer = setTimeout(() => {
      navigate("/landingpage");
    }, 40000); // â± 20 segundos

    return () => clearTimeout(timer); // limpieza
  }, [navigate]);

  return (
    <AppBar position="sticky" color="primary" elevation={3}>
      <Toolbar
        sx={{
          position: "relative",
          minHeight: 64,
        }}
      >
        {/* IZQUIERDA */}
        <Box sx={{ display: "flex", alignItems: "center", zIndex: 1 }}>
          <Typography
            variant="h6"
            component={motion.div}
            initial={{ opacity: 0, x: -50 }}
            animate={{ opacity: 1, x: 0 }}
            transition={{ duration: 0.8 }}
            sx={{ cursor: "pointer" }}
            onClick={() => navigate("/")}
          >
            Miguel Paz | Chemical Engineering Portfolio
          </Typography>
        </Box>

        {/* CENTRO */}
        <Box
          sx={{
            position: "absolute",
            left: "50%",
            transform: "translateX(-50%)",
            pointerEvents: "none",
            display: "flex",
            alignItems: "center",
          }}
        >
          <TypingCode />
        </Box>

        {/* DERECHA */}
        <Box sx={{ marginLeft: "auto", zIndex: 1 }}>
          <Button color="inherit" onClick={() => navigate("/landingpage")}>
            Inicio
          </Button>
        </Box>
      </Toolbar>
    </AppBar>
  );
}

export default Navbar;
