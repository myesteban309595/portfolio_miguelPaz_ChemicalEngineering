import {
  AppBar,
  Toolbar,
  Typography,
  Button,
  Container,
  Box,
  Divider,
  Grid,
} from "@mui/material";
import { createTheme, ThemeProvider } from "@mui/material/styles";
import { motion } from "framer-motion";
import { useEffect, useState, useRef } from "react";
import { Link as RouterLink } from "react-router-dom";
import { Link } from "react-scroll";

import ProjectCarrousel from "./ProjectCarrousel/ProjectCarrousel";

import HCVModal from "../Modals/HCVModal";
import ThankYouModal from "../Modals/ThankYouModal";

const logos = [
  { src: "/logos/liderazgo.png", name: "Liderazgo", width: 70, height: 70 },
  {
    src: "/logos/trabajoenequipo.png",
    name: "Trabajo en Equipo",
    width: 90,
    height: 60,
  },
  {
    src: "/logos/manejopersonal.png",
    name: "Manejo de Personal",
    width: 200,
    height: 130,
  },
  {
    src: "/logos/adaptabilidad.png",
    name: "Adaptabilidad",
    width: 95,
    height: 95,
  },
  {
    src: "/logos/optimizacion.png",
    name: "Optimizaci√≥n",
    width: 90,
    height: 90,
  },
  { src: "/logos/eficiencia.png", name: "Eficiencia", width: 80, height: 80 },
  { src: "/logos/proactivo.png", name: "Proactivo", width: 80, height: 80 },
  { src: "/logos/dinamico.png", name: "Din√°mico", width: 80, height: 80 },
];

const EngineerLogos = [
  {
    src: "/logos/MicrosoftExcel.png",
    name: "Excel Avanzado",
    width: 120,
    height: 80,
  },
  {
    src: "/logos/ms-word.png",
    name: "Microsoft Word",
    width: 140,
    height: 80,
  },
  {
    src: "/logos/Ofimatica.png",
    name: "Ofimatica",
    width: 80,
    height: 80,
  },
  { src: "/logos/Power-BI.png", name: "Power BI", width: 92, height: 92 },
  {
    src: "/logos/sap.webp",
    name: "SAP B1 S/4Hana",
    width: 90,
    height: 90,
  },
  { src: "/logos/HYSYS.png", name: "Aspen Hysys", width: 80, height: 80 },
  {
    src: "/logos/sixsigma_black.png",
    name: "L.Six Sigma Black Belt",
    width: 85,
    height: 85,
  },
  {
    src: "/logos/sixsigma.png",
    name: "L.Six Sigma Yellow Belt",
    width: 120,
    height: 75,
  },
];

// üîπ Typing Effect para Hero
const TypingEffect = ({ texts, speed = 40 }) => {
  const [displayedText, setDisplayedText] = useState("");
  const [index, setIndex] = useState(0);
  const [textIndex, setTextIndex] = useState(0);

  useEffect(() => {
    if (index < texts[textIndex].length) {
      const timeout = setTimeout(() => {
        setDisplayedText((prev) => prev + texts[textIndex][index]);
        setIndex(index + 1);
      }, speed);
      return () => clearTimeout(timeout);
    } else {
      setTimeout(() => {
        setDisplayedText("");
        setIndex(0);
        setTextIndex((prev) => (prev + 1) % texts.length);
      }, 800);
    }
  }, [index, textIndex, texts, speed]);

  return (
    <Typography
      variant="h5"
      sx={{ mt: 2, color: "#00e5ff", fontWeight: "bold" }}
    >
      {displayedText}
      {/* <span className="blinking-cursor">|</span> */}
    </Typography>
  );
};

// üîπ Tema Oscuro
const darkTheme = createTheme({
  palette: {
    mode: "dark",
    primary: { main: "#00e5ff" },
    background: { default: "#0a0a0a", paper: "rgba(18,18,18,0.7)" },
  },
  typography: {
    fontFamily: "'Poppins', sans-serif",
  },
});

// üîπ Landing Page
export default function LandingPage() {
  const sectionsRef = useRef({});
  const [active, setActive] = useState("hero");
  const [skillsIndex, setSkillsIndex] = useState(0);

  const [modalOpen, setModalOpen] = useState(false);
  const [thankYouOpen, setThankYouOpen] = useState(false);

  useEffect(() => {
    const interval = setInterval(() => {
      setSkillsIndex((prev) => (prev === 0 ? 1 : 0));
    }, 4500);

    return () => clearInterval(interval);
  }, []);

  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            setActive(entry.target.id);
          }
        });
      },
      {
        root: document.getElementById("scroll-container"),
        threshold: 0.6,
      }
    );

    Object.values(sectionsRef.current).forEach((section) => {
      if (section) observer.observe(section);
    });

    return () => observer.disconnect();
  }, []);

  // envio de correo
  const enviarFormularioContacto = async (e) => {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);

    // Configuraci√≥n FormSubmit
    formData.append("_subject", "Tienes un mensaje desde el portafolio üöÄ");
    formData.append("_captcha", "false");
    formData.append("_template", "table");

    try {
      const response = await fetch(
        "https://formsubmit.co/ajax/017251fa4037517c5787d1a815a79c74",
        {
          method: "POST",
          body: formData,
        }
      );

      if (response.ok) {
        setThankYouOpen(true);
        alert("Mensaje enviado correctamente üöÄ");
        form.reset();
      } else {
        alert("Error al enviar el mensaje ‚ùå");
      }
    } catch (error) {
      alert("Error de conexi√≥n ‚ùå");
    }
  };

  // üìÑ Descargar PDF
  const descargarDocumento = (documentName) => {
    const link = document.createElement("a");
    link.href = `/Documentos/${documentName}`;
    link.download = documentName;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  };

  return (
    <ThemeProvider theme={darkTheme}>
      <Box
        id="scroll-container"
        sx={{
          height: "100vh",
          overflowY: "auto",
          scrollSnapType: "y mandatory",
          scrollBehavior: "smooth",
        }}
      >
        {/* Navbar flotante */}
        <AppBar
          position="sticky"
          sx={{
            top: 0,
            left: 0,
            right: 0,
            background: "rgba(0,0,0,0.5)",
            backdropFilter: "blur(8px)",
            boxShadow: "none",
            zIndex: 1200,
          }}
        >
          <Toolbar
            sx={{
              flexDirection: { xs: "column", md: "row" }, 
              alignItems: { xs: "center", md: "center" }, 
              justifyContent: { xs: "center", md: "space-between" }, 
              flexWrap: "nowrap",
              gap: { xs: 1, md: 0 },
              overflowX: "auto",
            }}
          >
            <Typography
              component={RouterLink}
              to="/"
              sx={{
                mt: { xs: 1, md: 0 },
                flexGrow: 1,
                flexShrink: 1,
                fontWeight: "bold",
                textDecoration: "none",
                color: "inherit",
                cursor: "pointer",
                userSelect: "none",
                transition: "0.25s ease",
                textAlign: { xs: "center", md: "left" }, // Center text on mobile, left-align on desktop
                whiteSpace: "nowrap",
                "&:hover": {
                  opacity: 0.85,
                  textShadow: "0 0 8px rgba(0,229,255,0.6)",
                  transform: "translateY(-1px)",
                },
                "&:active": {
                  transform: "scale(0.98)",
                },
              }}
            >
              Miguel Paz | Energy Efficiency Specialist
            </Typography>

            <Box
              sx={{
                display: "flex",
                flexDirection: "row",
                flexWrap: { xs: "nowrap", md: "wrap" },
                justifyContent: { xs: "center", md: "flex-end" },
                width: "100%", 
                gap: 1, 
                overflowX: { xs: "auto", md: "visible" }, 
                height: { xs: "28px", md: "50px" },
                maxHeight: { xs: "28px", md: "50px" }, 
                overflow: "hidden", 
              }}
            >
              {[
                { label: "Sobre m√≠", id: "sobremi" },
                { label: "Hero", id: "hero" },
                { label: "Proyectos", id: "proyectos" },
                { label: "Contacto", id: "contacto" },
              ].map((item, i) => (
                <Button
                  key={i}
                  component={Link}
                  containerId="scroll-container"
                  to={item.id}
                  smooth={true}
                  duration={20}
                  offset={0}
                  onClick={() => setActive(item.id)}
                  className={active === item.id ? "active" : ""}
                  color="inherit"
                  sx={{
                    position: "relative",
                    flex: { xs: "0 0 auto", md: "0 0 auto" }, 
                    textTransform: "none",
                    width: "auto",
                    minWidth: "unset",
                    whiteSpace: "nowrap",
                    mx: { xs: 0.5, md: 1 }, 
                    "&.active": {
                      color: "#00e5ff",
                      fontWeight: "bold",
                      textShadow: "0 0 8px #00e5ff, 0 0 16px #00bfa6",
                    },
                    "&.active::after": {
                      content: '""',
                      position: "absolute",
                      bottom: -2,
                      left: "50%",
                      transform: "translateX(-50%)",
                      width: "80%",
                      height: "3px",
                      borderRadius: "2px",
                      background: "linear-gradient(90deg, #00e5ff, #00bfa6)",
                      boxShadow: "0 0 8px #00e5ff",
                      animation: "glow 1.5s infinite alternate",
                    },
                    "@keyframes glow": {
                      from: { boxShadow: "0 0 4px #00e5ff" },
                      to: { boxShadow: "0 0 12px #00bfa6" },
                    },
                  }}
                >
                  {item.label}
                </Button>
              ))}
            </Box>
          </Toolbar>
        </AppBar>

        {/* ===== ABOUT ===== */}
        <Box
          id="sobremi"
          ref={(el) => (sectionsRef.current.sobremi = el)}
          sx={{
            width: "100%",
            scrollSnapAlign: "start",
            // scrollMarginTop: "64px",
            height: { xs: "auto", md: "100vh", lg: "100vh", xl: "100vh" },
            minHeight: "100vh",
            overflow: { xs: "visible", md: "hidden", lg: "hidden", xl: "hidden" },
            px: { xs: 1.5, md: 4, lg: 4, xl: 12 },
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            bgcolor: "background.paper",
          }}
        >
          <Box
            component={motion.div}
            initial={{ opacity: 0, y: 50 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 1 }}
            sx={{
              display: "flex",
              flexDirection: { xs: "column", md: "row", lg: "row", xl: "row" },
              alignItems: "center",
              gap: { xs: 2.5, md: "4rem", lg: "6rem", xl: "8rem" },
              width: { xs: "100%", md: "100%", lg: "99%", xl: "90%" },
              maxWidth: "auto",
            }}
          >
            {/* FOTO (FIJA) */}
            <Box
              sx={{
                ml: { md: 4, lg: 5, xl: 0 },
                position: "relative",
                width: { xs: "100%", md: "28vw", lg: "28vw", xl: "28vw" },
                maxWidth: { xs: "220px", sm: "260px", md: "none", lg: "none", xl: "none" },
                display: "flex",
                justifyContent: "center",
              }}
            >
              <Box
                component="img"
                src="/Foto/fotopersonal1.png"
                alt="miguel Paz"
                sx={{
                  width: { xs: "165px", sm: "120px", md: "130%", lg: "130%", xl: "140%" },
                  height: "auto",
                  borderRadius: "16px",
                  boxShadow: "0 8px 40px rgba(0,0,0,0.7)",
                  objectFit: "cover",
                }}
              />
              {/* BOT√ìN SOBRE LA FOTO */}
              <motion.div
                initial={{ opacity: 0, x: -40 }}
                whileInView={{ opacity: 1, x: 0 }}
                viewport={{ once: false, amount: 0.6 }}
                transition={{ duration: 0.6, ease: "easeOut" }}
              >
                <Box
               sx={{
                // PC: flotando sobre la foto
                position: { xs: "static", md: "absolute", lg: "absolute", xl: "absolute" },
                top: { md: 6, lg: 7, xl: 14 },
                right: { md: -6, lg: -25, xl: -5 },

                // Mobile: debajo de la foto
                mt: { xs: 1.2, md: 0 , lg: 0, xl: 0 },
                display: "flex",
                justifyContent: { xs: "center", md: "flex-end", lg: "flex-end", xl: "flex-end" },
                zIndex: 20,
              }}
                >
                  <Button
                    variant="outlined"
                    onClick={() => setModalOpen(true)}
                    sx={{
                      position: "absolute",
                      overflow: "hidden",
                      color: "#00e5ff",
                      borderColor: "transparent",
                      fontWeight: "bold",
                      fontSize: { xs: 10, md: 11, lg: 11, xl: 15 },
                      borderRadius: "999px",
                      px: { xs: 1.4, md: 2.0, lg: 2.0, xl: 3.0 },
                      py: 0.5,
                      backdropFilter: "blur(6px)",
                      background: "rgba(0,0,0,0.45)",
                      textShadow: "0 0 8px rgba(0,229,255,0.9)",
                      boxShadow:
                        "0 0 7px rgba(0,229,255,0.6), 0 0 28px rgba(0,229,255,0.35)",

                      "&::after": {
                        content: '""',
                        position: "absolute",
                        inset: "-40%",
                        background:
                          "radial-gradient(circle at center, rgba(0,229,255,0.35), transparent 70%)",
                        filter: "blur(22px)",
                        opacity: 0.9,
                        zIndex: -1,
                        transition: "0.4s ease",
                      },

                      "&::before": {
                        content: '""',
                        position: "absolute",
                        inset: 0,
                        borderRadius: "999px",
                        border: "2px solid #00e5ff",
                        boxShadow: "0 0 12px rgba(0,229,255,0.8)",
                      },

                      "&:hover": {
                        color: "#74eada",
                        textShadow: "0 0 10px rgba(0,191,166,1)",
                        boxShadow:
                          "0 0 10px rgba(0,229,255,0.9), 0 0 36px rgba(0, 159, 191, 0.7)",
                        transform: "scale(1.08)",
                      },
                    }}
                  >
                    Detalles
                  </Button>
                </Box>
              </motion.div>
            </Box>
            {/* TEXTO */}
            <Box sx={{ width: "100%", mt: { xs: 1, md: 5 } }}>
              <Typography
                variant="h4"
                gutterBottom
                sx={{
                  mb: { xs: 0, md: 0, lg: 2, xl: 5 },
                  fontWeight: "bold",
                  color: "white",
                  fontSize: { xs: "1.3rem", md: "2.1rem",  lg: "2.1rem", xl: "2.5rem" },
                  textAlign: { xs: "center", md: "left",  lg: "left", xl: "left"},
                }}
              >
                Sobre m√≠
              </Typography>

              {/* MOBILE: TEXTO DIVIDIDO EN P√ÅGINAS */}
              <Box
                sx={{
                  display: { xs: "flex", md: "none" },
                  overflowX: "auto",
                  scrollSnapType: "x mandatory",
                  gap: 2,
                  pb: 1,
                }}
              >
                {/* P√°gina 1 */}
                <Box
                  sx={{
                    minWidth: "100%",
                    scrollSnapAlign: "start",
                    bgcolor: "rgba(255,255,255,0.03)",
                    borderRadius: "14px",
                    p: 2,
                    backdropFilter: "blur(6px)",
                  }}
                >
                  <Typography
                    sx={{ color: "#ccc", fontSize: "0.8rem", lineHeight: 1.6 }}
                  >
                    Ingeniero Qu√≠mico con m√†s de 7 a√±os de experiencia en los sectores
                    de cuidado personal, cosm√©ticos, alimentos y farmac√©utico,
                    con s√≥lidos conocimientos en optimizaci√≥n, control y mejora
                    de procesos a nivel industrial. Especialista en la
                    transformaci√≥n de materias primas para generar valor
                    agregado y en el an√°lisis de muestras qu√≠micas bajo
                    est√°ndares de calidad.
                  </Typography>

                  <Typography
                    sx={{
                      textAlign: "center",
                      mt: 2,
                      opacity: 0.6,
                      fontSize: "2.2rem",
                    }}
                  >
                    ‚Ä¢
                  </Typography>
                </Box>

                {/* P√°gina 2 */}
                <Box
                  sx={{
                    minWidth: "100%",
                    scrollSnapAlign: "start",
                    bgcolor: "rgba(255,255,255,0.03)",
                    borderRadius: "14px",
                    p: 2,
                    backdropFilter: "blur(6px)",
                  }}
                >
                  <Typography
                    sx={{ color: "#ccc", fontSize: "0.8rem", lineHeight: 1.6 }}
                  >
                    Cuento con habilidades destacadas en trabajo en equipo,
                    liderazgo y comunicaci√≥n efectiva, orientadas al logro de
                    objetivos organizacionales y a la alineaci√≥n de metas
                    estrat√©gicas. Interesado en desempe√±arme en √°reas de
                    mejoramiento industrial, innovaci√≥n, seguridad e higiene,
                    as√≠ como en la automatizaci√≥n de procesos y el desarrollo de
                    soluciones sostenibles, ambientalmente responsables y
                    centradas en el talento humano.
                  </Typography>

                  <Typography
                    sx={{
                      textAlign: "center",
                      mt: 2,
                      opacity: 0.6,
                      fontSize: "2.2rem",
                    }}
                  >
                    ‚Ä¢‚Ä¢
                  </Typography>
                </Box>
              </Box>

              {/* DESKTOP: TEXTO COMPLETO */}
              <Box sx={{ display: { xs: "none", md: "block" } }}>
                <Typography
                  variant="body1"
                  sx={{
                    color: "#ccc",
                    fontSize: { xs: "0.93rem", md: "0.93rem", lg: "1rem", xl: "1.4rem" }, 
                    lineHeight: 1.7,
                    textAlign: "justify",
                  }}
                >
                  Ingeniero Qu√≠mico con m√†s de 7 a√±os de experiencia en los
                  sectores de cuidado personal, cosm√©ticos, alimentos y
                  farmac√©utico, con s√≥lidos conocimientos en optimizaci√≥n,
                  control y mejora de procesos a nivel industrial. Especialista
                  en la transformaci√≥n de materias primas para generar valor
                  agregado y en el an√°lisis de muestras qu√≠micas bajo est√°ndares
                  de calidad.
                  <br />
                  <br />
                  Cuento con habilidades destacadas en trabajo en equipo,
                  liderazgo y comunicaci√≥n efectiva, orientadas al logro de
                  objetivos organizacionales y a la alineaci√≥n de metas
                  estrat√©gicas. Interesado en desempe√±arme en √°reas de
                  mejoramiento industrial, innovaci√≥n, seguridad e higiene, as√≠
                  como en la automatizaci√≥n de procesos y el desarrollo de
                  soluciones sostenibles, ambientalmente responsables y
                  centradas en el talento humano.
                  <br />
                  <br />
                </Typography>
              </Box>
              <Box
                sx={{
                  mt: {xs:2, md:3, lg:3, xl:4},
                  display: "flex",
                  justifyContent: "center",
                }}
              >
                <Button
                  onClick={() =>
                    descargarDocumento("Reconocimiento_miguelpaz.pdf")
                  }
                  sx={{
                    px: {xs:3.6, md:3.6, lg:3.6, xl:6.0},
                    py: {xs:1, md:1, lg:1, xl:2},
                    borderRadius: "12px",
                    textTransform: "none",
                    fontWeight: 500,
                    fontSize: "0.9rem",
                    letterSpacing: "0.3px",
                    color: "#bdefff",
                    background: "transparent",
                    border: "1px solid rgba(255,255,255,0.18)",
                    transition: "all 0.25s ease",

                    "&:hover": {
                      background: "rgba(255,255,255,0.04)",
                      borderColor: "rgba(0,229,255,0.4)",
                      color: "#00e5ff",
                    },

                    "&:active": {
                      transform: "scale(0.98)",
                    },
                  }}
                >
                  Descargar reconocimiento
                </Button>
              </Box>
            </Box>
          </Box>
        </Box>

        {/* ===== HERO ===== */}
        <Box
          id="hero"
          ref={(el) => (sectionsRef.current.hero = el)}
          sx={{
            minHeight: "100vh",
            height: "100vh",
            scrollSnapAlign: "start",
            scrollMarginTop: "64px",
            display: "flex",
            flexDirection: { xs: "column", md: "row", lg: "row", xl: "row" },
            alignItems: "center",
            justifyContent: "center",
            textAlign: "center",
            px: { xs: 2, md: 0 },
            background:
              "radial-gradient(circle at top, #0f2027, #203a43, #2c5364)",
            position: "relative",
            overflow: "hidden",
          }}
        >
          {/* columna izquierda */}
          <Box
            sx={{
              flex: { xs: "0 0 40%", md: "0 0 55%" },
              maxWidth: { xs: "100%", md: "55%" },
              height: { xs: "auto", md: "100%" },
              minHeight: { xs: "unset", md: "100vh" },
              py: { xs: 2, md: 9, lg: 12, xl: 18 },
              px: { xs: 1.3, md: 4, lg: 4, xl: 28 },
              background: "linear-gradient(180deg, #0f2027, #203a43, #2c5364)",
              overflow: "hidden",
            }}
          >
            <Typography
              sx={{
                color: "#fff",
                fontWeight: "bold",
                mb: { xs: 1, md: 5, lg: 5.5, xl: 9 },
                fontSize: {
                  xs: "1.2rem",
                  md: "2rem",
                  lg: "2.2rem",
                  xl: "3rem",
                },
              }}
            >
              üöÄ Skills & Technologies
            </Typography>

            <motion.div
              key={skillsIndex}
              initial={{ opacity: 0, x: 40 }}
              animate={{ opacity: 1, x: 0 }}
              exit={{ opacity: 0, x: -40 }}
              transition={{ duration: 0.6 }}
            >
              {skillsIndex === 0 ? (
                <>
                  {/* ================= SOFTWARE DEVELOPMENT SKILLS ================= */}
                  <Divider
                       sx={{
                        my: { xs: 4, md: 3, lg: 4, xl: 10 },
                        borderColor: "rgba(255,255,255,0.2)",
                        width: { xs: "90%", md: "90%", lg: "90%", xl: "100%" },
                        mx: "auto",
                      }}
                  >
                    <Typography
                           sx={{
                            color: "#00e5ff",
                            fontWeight: "bold",
                            fontSize: {
                              xs: "0.7rem",
                              md: "0.9rem",
                              lg: "1rem",
                              xl: "1.5rem",
                            },
                          }}
                    >
                      Soft Skills
                    </Typography>
                  </Divider>

                  <Grid
                    container
                    spacing={{ xs: 1, md: 4, lg: 4, xl: 6 }}
                    justifyContent="center"
                  >
                    {logos.map((logo, i) => (
                      <Grid item xs={6} sm={4} md={3} key={i}>
                        <Box
                          sx={{
                            display: "flex",
                            flexDirection: "column",
                            alignItems: "center",
                          }}
                        >
                          <Box
                            sx={{
                              width: { xs: 55, md: 95, lg: 95, xl: 100 },
                              height: { xs: 55, md: 95, lg: 95, xl: 110 },
                              borderRadius: "14px",
                              background: "rgba(255,255,255,0.05)",
                              display: "flex",
                              alignItems: "center",
                              justifyContent: "center",
                              p: { xs: 0.7, md: 2 },
                            }}
                          >
                            <motion.img
                              src={logo.src}
                              alt={logo.name}
                              style={{
                                maxWidth: "100%",
                                maxHeight: "100%",
                                objectFit: "contain",
                              }}
                              whileHover={{
                                scale: 1.3,
                                rotate: 5,
                                filter: "drop-shadow(0px 0px 20px #00e5ff)",
                              }}
                              transition={{ type: "spring", stiffness: 300 }}
                            />
                          </Box>

                          <Typography
                           sx={{
                            color: "#fff",
                            mt: 0.5,
                            textAlign: "center",
                            fontSize: {
                              xs: "0.55rem",
                              md: "0.8rem",
                              lg: "0.8rem",
                              xl: "0.8rem",
                            },
                            lineHeight: 1.1,
                          }}
                          >
                            {logo.name}
                          </Typography>
                        </Box>
                      </Grid>
                    ))}
                  </Grid>
                </>
              ) : (
                <>
                  {/* ================= TECHNICAL ENGINEERING SKILLS ================= */}
                  <Divider
                      sx={{
                        my: { xs: 4, md: 4, lg: 4, xl: 10 },
                        borderColor: "rgba(255,255,255,0.2)",
                        width: { xs: "90%", md: "90%", lg: "90%", xl: "100%" },
                        mx: "auto",
                      }}
                  >
                    <Typography
                        sx={{
                          color: "#00e5ff",
                          fontWeight: "bold",
                          fontSize: {
                            xs: "0.7rem",
                            md: "0.9rem",
                            lg: "1rem",
                            xl: "1.5rem",
                          },
                        }}
                    >
                      Tecnical Engineering Skills
                    </Typography>
                  </Divider>

                  <Grid
                       container
                       spacing={{ xs: 1.0, md: 4, lg: 4, xl: 6 }}
                       justifyContent="center"
                  >
                    {EngineerLogos.map((logo, i) => (
                      <Grid item xs={6} sm={4} md={3} key={i}>
                        <Box
                          sx={{
                            display: "flex",
                            flexDirection: "column",
                            alignItems: "center",
                          }}
                        >
                          <Box
                                 sx={{
                                  width: { xs: 55, md: 95, lg: 95, xl: 100 },
                                  height: { xs: 55, md: 95, lg: 95, xl: 110 },
                                  borderRadius: "14px",
                                  background: "rgba(255,255,255,0.05)",
                                  display: "flex",
                                  alignItems: "center",
                                  justifyContent: "center",
                                  p: { xs: 0.8, md: 2 },
                                }}
                          >
                            <motion.img
                              src={logo.src}
                              alt={logo.name}
                              style={{
                                maxWidth: "100%",
                                maxHeight: "100%",
                                objectFit: "contain",
                              }}
                              whileHover={{
                                scale: 1.3,
                                rotate: 5,
                                filter: "drop-shadow(0px 0px 20px #00e5ff)",
                              }}
                              transition={{ type: "spring", stiffness: 300 }}
                            />
                          </Box>

                          <Typography
                                  sx={{
                                    color: "#fff",
                                    mt: 0.5,
                                    textAlign: "center",
                                    fontSize: {
                                      xs: "0.5rem",
                                      md: "0.8rem",
                                      lg: "0.8rem",
                                      xl: "0.8rem",
                                    },
                                    lineHeight: 1.1,
                                  }}
                          >
                            {logo.name}
                          </Typography>
                        </Box>
                      </Grid>
                    ))}
                  </Grid>
                </>
              )}
            </motion.div>
          </Box>

          {/* columna derecha */}
          <Container
            sx={{
              flex: { xs: "0 0 40%", md: "0 0 45%" },
              maxWidth: { xs: "100%", md: "45%" },
              height: { xs: "50%", md: "auto", lg: "auto", xl: "auto" },
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              textAlign: "center",
            }}
          >
            <motion.div
              initial={{ opacity: 0, y: 60 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 1 }}
            >
              <Typography
                 sx={{
                  fontWeight: "bold",
                  color: "white",
                  fontSize: { xs: "1.2rem", md: "2.1rem", lg: "2.1rem", xl: "2.88rem" },
                  mt: 5,
                }}
              >
                Hola, soy <span style={{ color: "#00e5ff" }}>[Miguel Paz]</span>
              </Typography>

              <TypingEffect
                texts={[
                  "Chemical Engineer",
                  "Energy Efficiency Specialist",
                  "QEHS and Energy Internal Auditor",
                ]}
              />
              <Button
                component={Link}
                variant="contained"
                onClick={() => setActive("contacto")}
                containerId="scroll-container"
                to={"contacto"}
                smooth={true}
                duration={20}
                offset={0}
                sx={{
                  mt: { xs: 3, md: 8, lg: 8, xl: 12 },
                  px: { xs: 3, md: 3.5 , lg: 3.5, xl: 5 },
                  py: { xs: 1, md: 1.4 , lg: 1.4, xl: 2 },
                  fontSize: { xs: "0.8rem", md: "1rem" },
                  borderRadius: "12px",
                  fontWeight: "bold",
                }}
              >
                Cont√°ctame
              </Button>
            </motion.div>
          </Container>
        </Box>

        {/* Projects */}
        <Box
          id="proyectos"
          ref={(el) => (sectionsRef.current.proyectos = el)}
          sx={{
            minHeight: "100vh",
            scrollSnapAlign: "start",
            scrollMarginTop: "24px",
          }}
        >
          <ProjectCarrousel />
        </Box>

        {/* Contact (ORIGINAL SIN CAMBIOS) */}
        <Box
          id="contacto"
          ref={(el) => (sectionsRef.current.contacto = el)}
          sx={{
            minHeight: "100vh",
            scrollSnapAlign: "start",
            scrollMarginTop: "24px",
            py: 10,
            px: { xs: 2, md: 4 },
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            background:
              "linear-gradient(135deg, rgba(0,229,255,0.1), rgba(0,0,0,0.7))",
            backdropFilter: "blur(12px)",
          }}
        >
          <motion.div
            initial={{ opacity: 0, y: 90 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 1 }}
            style={{
              width: "100%",
              maxWidth: "700px",
              padding: "2.5rem",
              borderRadius: "20px",
              background: "rgba(18,18,18,0.85)",
              boxShadow: "0 8px 40px rgba(0,0,0,0.6)",
            }}
          >
            <Typography
              variant="h4"
              gutterBottom
              sx={{ fontWeight: "bold", color: "#00e5ff", textAlign: "center" }}
            >
              ¬°Hablemos!
            </Typography>

            <Typography
              variant="body1"
              sx={{ color: "#ccc", mb: 1, textAlign: "center" }}
            >
              D√©jame un mensaje y te respondser√© lo m√°s pronto posible üöÄ
            </Typography>

            {/* Formulario */}
            <Box
              component="form"
              onSubmit={enviarFormularioContacto}
              sx={{
                display: "flex",
                flexDirection: "column",
                gap: 3,
              }}
            >
              <input
                type="text"
                name="name"
                placeholder="Dime tu nombre"
                style={{
                  padding: "14px",
                  borderRadius: "10px",
                  border: "1px solid #444",
                  background: "#111",
                  color: "white",
                  fontSize: "1rem",
                }}
              />
              <input
                type="email"
                name="email"
                placeholder="Tu correo"
                style={{
                  padding: "14px",
                  borderRadius: "10px",
                  border: "1px solid #444",
                  background: "#111",
                  color: "white",
                  fontSize: "1rem",
                }}
              />
              <textarea
                name="message"
                placeholder="Tu mensaje"
                rows="5"
                style={{
                  padding: "14px",
                  borderRadius: "10px",
                  border: "1px solid #444",
                  background: "#111",
                  color: "white",
                  fontSize: "1rem",
                  resize: "none",
                }}
              />
              <Button
                type="submit"
                variant="contained"
                sx={{
                  background: "linear-gradient(90deg, #00e5ff, #00bfa6)",
                  fontWeight: "bold",
                  py: 1.5,
                  borderRadius: "12px",
                  "&:hover": {
                    background: "linear-gradient(90deg, #00bfa6, #00e5ff)",
                    transform: "scale(1.05)",
                    transition: "0.3s",
                  },
                }}
              >
                Enviar Mensaje
              </Button>
            </Box>
          </motion.div>

          {/* MODALES */}
          <HCVModal open={modalOpen} onClose={() => setModalOpen(false)} />
          {/* MODAL mensaje de agradecimiento*/}
          <ThankYouModal
            open={thankYouOpen}
            onClose={() => setThankYouOpen(false)}
          />
        </Box>
      </Box>
    </ThemeProvider>
  );
}
